#!/bin/bash
# GENERATED by dcos-image
#
# dcos-image commit: {{ dcos_image_commit }}
# generation date: {{ template_generation_date }}
#
#
set -o errexit -o nounset -o pipefail

function usage {
cat <<USAGE
 USAGE: $(basename "$0")

  Generate a Vagrantfile + basic config for a single-host DCOS App development environment.
USAGE
}

if [ $# -ne 0 ]; then
  usage
  exit 1
fi

if [ -e user-data ]; then
  echo "ERROR: user-data file already exists. Cowardly refusing to overwrite it."
  exit 1
fi

if [ -e Vagrantfile ]; then
  echo "ERROR: Vagrantfile file already exists. Cowardly refusing to overwrite it."
  exit 1
fi

if [ -e config.rb ]; then
  echo "ERROR: config.rb file already exists. Cowardly refusing to overwrite it."
  exit 1
fi

cat <<'EOF' > user-data
{{ user_data_body }}
EOF

cat <<'EOF' > Vagrantfile
{{ vagrantfile_body }}
EOF

cat <<'EOF' > config.rb
{{ config_body }}
EOF

echo 'Vagrant based DCOS app-development VM ready to start. To start the cluster run:'
echo '$vagrant up'
