#!/bin/bash
export PATH=/opt/mesosphere/bin:$PATH
export LIB_INSTALL_DIR="$PKG_PATH/lib/python3.4/site-packages"
#export PYTHONPATH="/opt/mesosphere/lib/python3.4/site-packages:$LIB_INSTALL_DIR"
#export LD_LIBRARY_PATH=/opt/mesosphere/lib

mkdir -p "$LIB_INSTALL_DIR"

# Install packages individually. Do not resolve and install dependencies
# automatically.
for package in futures jmespath botocore boto3; do
  pushd "/pkg/src/$package"
  pip install --no-deps  --target="$LIB_INSTALL_DIR" *.whl
  popd
done

cfn_signal="$PKG_PATH/bin/cfn-signal"
mkdir -p $(dirname "$cfn_signal")
cp /pkg/extra/cfn-signal "$cfn_signal"
