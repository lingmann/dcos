#!/bin/bash
set -o errexit -o nounset -o pipefail

master_conf="$PKG_PATH"/mesos-master
mkdir -p "$(dirname "$master_conf")"
cat <<'EOF' > "$master_conf"
MESOS_LOG_DIR=/var/log/mesos
MESOS_WORK_DIR=/var/lib/mesos/master
MESOS_ZK=zk://127.0.0.1:2181/mesos
MESOS_QUORUM=2
EOF

slave_conf="$PKG_PATH"/mesos-slave
mkdir -p "$(dirname "$slave_conf")"
cat <<'EOF' > "$slave_conf"
#MESOS_MASTER=zk://${aws_instance.mesos-master.private_ip}:2181/mesos
MESOS_CONTAINERIZERS=docker,mesos
MESOS_LOG_DIR=/var/log/mesos
MESOS_EXECUTOR_REGISTRATION_TIMEOUT=5mins
MESOS_ISOLATION=cgroups/cpu,cgroups/mem
MESOS_WORK_DIR=/var/lib/mesos/slave
EOF
